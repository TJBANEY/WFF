{% extends 'base.html' %}
{% load inplace_edit %}


{% block page-title %}
    {% if page.meta_title %}{{ page.meta_title }}{% else %}{{ page.label }}{% endif %}
{% endblock %}


{% block meta_description %}
    {% if page.meta_description %}
        {{ page.meta_description }}
    {% else %}
        {{ block.super }}
    {% endif %}
{% endblock %}


{% block meta_tags %}
    {% if page.meta_tags %}
        {{ page.meta_tags }}
    {% else %}
        {{ block.super }}
    {% endif %}
{% endblock %}


{% block extra-head %}

    {% inplace_static %}

{% endblock %}


{% block body-class %}

    {% if page.template_choice = 'product' %}
        class='product-page'
    {% else %}
        class='standard-page'
    {% endif %}

{% endblock %}


{% block content %}

    <div id='cover-image'{% if page.image_cover %}class='dark' style='background-image: url("{{ page.image_cover }}")'{% endif %}>

        <div class='cover-overlay'></div>

        <div class='cover-content container'>

            <div class='row'>

                <div class='col-xs-12'>

                    <h1>{% inplace_edit 'page.label' %}</h1>

                </div>

            </div>

        </div>

    </div>

    <div id='sections' class='content-gutter detail-sections'>

        {% block template_override_content %}{% endblock %}

        {% for section in page.sections %}
            <div class='section-wrapper{% if section.grey_section %} grey{% endif %}{% if forloop.first %} first-section{% endif %}'>

                <div class='container'>

                    <div class='row'>

                        {% inplace_edit 'section.content|safe' adaptor='tiny' %}

                        {% if section.is_contact_form %}
                            <div id='contact-form' class='col-sm-7'>

                                {% if message %}
                                    <div class="{% if not success%}error-wrapper{% endif %}">
                                        <h3>{{ message }}</h3>
                                    </div>
                                {% endif %}

                                <div class='row'>

                                    <form method='POST'>
                                        {% csrf_token %}

                                        <div class='input-wrapper col-xs-12 col-sm-6{% if contact_form.first_name.errors %} error{% endif %}'>
                                            <label for='id_first_name'>First Name</label>
                                            {{ contact_form.first_name }}
                                        </div>

                                        <div class='input-wrapper col-xs-12 col-sm-6 {% if contact_form.last_name.errors %} error{% endif %}'>
                                            <label for='id_last_name'>Last Name</label>
                                            {{ contact_form.last_name }}
                                        </div>

                                        <div class='input-wrapper col-xs-12 {% if contact_form.email.errors %} error{% endif %}'>
                                            <label for='id_email'>Email Address</label>
                                            {{ contact_form.email }}
                                        </div>

                                        <div class='input-wrapper col-xs-12 {% if contact_form.message.errors %} error{% endif %}'>
                                            <label for='id_message'>Message</label>
                                            {{ contact_form.message }}
                                        </div>

                                        <div class='input-wrapper col-xs-12'>
                                            <input type='submit' class='btn' value='Send Your Message'>
                                        </div>

                                    </form>

                                </div>

                            </div>
                        {% endif %}

                        <div class='clear-both'></div>

                    </div>

                </div>

            </div>
        {% endfor %}

    </div>

{% endblock %}


{% if active_user %}
    {% block user-actions %}

        <span class='left'>
            <a onclick='displayManageWindow("/admin/page_content/webpage/{{ page.id }}/")'>edit page</a>
        </span>

        <span class='left'>
            <a>is published {% inplace_edit 'page.is_published' autoSave='0', eventInplaceEdit='click' %}</a>
        </span>

        <span class='left'>
            <a>template: {% inplace_edit 'page.template_choice' autoSave='0', eventInplaceEdit='click', edit_empty_value='-----' %}</a>
        </span>

    {% endblock %}
{% endif %}
