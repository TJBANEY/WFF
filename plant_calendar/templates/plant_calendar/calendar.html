<script src="http://code.jquery.com/jquery-3.2.1.min.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.css">
<link rel="stylesheet" href="/static/bulma-docs.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

{% load calendar_tags %}

<style>

    .month {
        text-transform: capitalize;
    }

    .column {
        text-align: center;
    }

    .column .day-triangle {
        position: absolute;
        border-style: solid;
        border-width: 50px 50px 0 0;
        border-color: black transparent transparent transparent;
        width: 0;
        height: 0;
        top: 0;
        left: 0;
    }

    .column .day {
        color: orange;
        position: absolute;
        top: 2px;
        left: 5px;
    }

    @media only screen and (max-width: 991px) {
        .column.first .day-triangle { left: 0.2rem !important; }
        .column.first .day { left: 0.3rem !important; }
    }

    #calendar-header .column { padding: 1.1rem 0.7rem 0.7rem 0.7rem; }

    #week-one .column,
    #week-two .column,
    #week-three .column,
    #week-four .column,
    #week-five .column {
        border: 1px solid black;
        padding: 70px 20px 90px 20px;
        position: relative;
    }

    .info { background-color: #209cee; }
    .success { background-color: #23d160; }
    .warning { background-color: #ffdd57; }
    .danger { background-color: #ff3860; }
    .is-one-fifth { width: 14.28% !important; }

</style>

<script>
    $(document).ready(function () {
        var body = $('body');

        body.on('click', '#prev-month', function () {
            console.log('CLICKED');

            $.ajax({
                'method': 'POST',
                'url': '/calendar/navigate/previous',
                'data': {'current_month': 'prev'},
                success: function (response) {
                    $('#baney-calendar').html(response.responseText)
                },
                error: function (err) {
                    console.log("AJAX error in request: " + JSON.stringify(err, null, 2));
                }
            })
        });

        body.on('click', '#next-month', function () {
            console.log('CLICKED');

            $.ajax({
                'method': 'POST',
                'url': '/calendar/navigate/next',
                'data': {'direction': 'next'},
                success: function (response) {
                    $('#baney-calendar').html(response)
                },
                error: function (err) {
                    console.log("AJAX error in request: " + JSON.stringify(err, null, 2));
                }
            })
        });
    });
</script>

<div class="container">
    <div id="baney-calendar" class="cal">
        <div class="columns" id="month-year">
            <div class="column">
                <i class="fa fa-caret-left" id="prev-month"
                   style="cursor: pointer; font-size: 28px; padding: 35px 20px 20px 20px;"></i>
            </div>
            <div class="column" style="padding: 35px 20px 20px 20px; font-size: 30px;">
                <span class="month">{{ month }}</span> {{ year }}
            </div>
            <div class="column">
                <i class="fa fa-caret-right" id="next-month"
                   style="cursor: pointer; font-size: 28px; padding: 35px 20px 20px 20px;"></i>
            </div>
        </div>
        <div class="columns" style="display: flex; text-align: center;">
            <p style="flex: 1;">A</p>
            <p style="flex: 1;">B</p>
            <p style="flex: 1;">C</p>
            <p style="flex: 1;">D</p>
        </div>
        <div class="columns" id="calendar-header" style="margin-top: 0.5rem;">
            <div class="column info">
                Monday
            </div>
            <div class="column success">
                Tuesday
            </div>
            <div class="column warning">
                Wednesday
            </div>
            <div class="column danger">
                Thursday
            </div>
            <div class="column info">
                Friday
            </div>
            <div class="column success">
                Saturday
            </div>
            <div class="column warning">
                Sunday
            </div>
        </div>
        <div class="columns" id="week-one">
            <div class="column first">
                {% autoescape off %}
                    {% first_day_of_month 0 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 1 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 2 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 3 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 4 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 5 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 6 request %}
                {% endautoescape %}
            </div>
        </div>
        <div class="columns" id="week-two">
            <div class="column first">
                {% autoescape off %}
                    {% first_day_of_month 0 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 1 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 2 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 3 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 4 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 5 request %}
                {% endautoescape %}
            </div>
            <div class="column is-one-seventh">
                {% autoescape off %}
                    {% first_day_of_month 6 request %}
                {% endautoescape %}
            </div>
        </div>
        <div class="columns" id="week-three">
            <div class="column first">
                {% autoescape off %}
                    {% first_day_of_month 0 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 1 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 2 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 3 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 4 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 5 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 6 request %}
                {% endautoescape %}
            </div>
        </div>
        <div class="columns" id="week-four">
            <div class="column first">
                {% autoescape off %}
                    {% first_day_of_month 0 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 1 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 2 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 3 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 4 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 5 request %}
                {% endautoescape %}
            </div>
            <div class="column">
                {% autoescape off %}
                    {% first_day_of_month 6 request %}
                {% endautoescape %}
            </div>
        </div>
        <div class="columns" id="week-five">
            <div class="column is-one-fifth first">
                {% autoescape off %}
                    {% first_day_of_month 0 request %}
                {% endautoescape %}
            </div>
            <div class="column is-one-fifth">
                {% autoescape off %}
                    {% first_day_of_month 1 request %}
                {% endautoescape %}
            </div>
            <div class="column is-one-fifth">
                {% autoescape off %}
                    {% first_day_of_month 2 request %}
                {% endautoescape %}
            </div>
        </div>
    </div>
</div>